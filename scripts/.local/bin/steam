#!/bin/bash -e
steam="$(basename "$0")"
if [[ $steam == "steam" ]]; then
    steam="steam-native"
fi
steamapps_host="$HOME/steamapps"

options=()
if [[ -d "$steamapps_host" ]]; then
    options+=("--bind=$steamapps_host:/home/yhndnzj/.local/share/Steam/steamapps")
fi
#options+=("--bind=/dev/snd" "--property=DeviceAllow=char-alsa rw")

# No need for root (/etc/polkit-1/rules.d/xow.rules)
systemctl --no-block start xow.service

set -x
exec arch-nspawn-run-gui --nvidia -- "${options[@]}" "$steam" "$@"
